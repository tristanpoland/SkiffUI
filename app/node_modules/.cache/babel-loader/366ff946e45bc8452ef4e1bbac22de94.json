{"ast":null,"code":"import _asyncToGenerator from\"/home/git/SkiffUI/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/git/SkiffUI/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/git/SkiffUI/app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import ReactFlow,{useNodesState,useEdgesState,Controls,updateEdge,addEdge,MiniMap,Background,getBezierPath,getEdgeCenter}from'react-flow-renderer';import'./button_edge.css';import\"./graph.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdatableEdge=function UpdatableEdge(props){var foreignObjectSize=40;var _useNodesState=useNodesState(props.initialNodes),_useNodesState2=_slicedToArray(_useNodesState,3),nodes=_useNodesState2[0],setNodes=_useNodesState2[1],onNodesChange=_useNodesState2[2];var _useEdgesState=useEdgesState(props.initialEdges),_useEdgesState2=_slicedToArray(_useEdgesState,3),edges=_useEdgesState2[0],setEdges=_useEdgesState2[1],onEdgesChange=_useEdgesState2[2];var postDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(idxId){var edge;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:edge=props.initialEdges[idxId];_context.next=3;return fetch('https://serverhackathon.prakshal.repl.co/deleteEdge',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify([props.currIdx,edge])}).then(function(response){return response.json();}).then(function(response){props.setDeployment(response);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function postDelete(_x){return _ref.apply(this,arguments);};}();var onEdgeClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(evt,id){var idxId;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:evt.stopPropagation();idxId=Number(id.split(\"-\")[1]);console.log(props.initialEdges[idxId]);_context2.next=5;return postDelete(idxId);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function onEdgeClick(_x2,_x3){return _ref2.apply(this,arguments);};}();function CustomEdge(_ref3){var id=_ref3.id,sourceX=_ref3.sourceX,sourceY=_ref3.sourceY,targetX=_ref3.targetX,targetY=_ref3.targetY,sourcePosition=_ref3.sourcePosition,targetPosition=_ref3.targetPosition,_ref3$style=_ref3.style,style=_ref3$style===void 0?{}:_ref3$style,markerEnd=_ref3.markerEnd;var edgePath=getBezierPath({sourceX:sourceX,sourceY:sourceY,sourcePosition:sourcePosition,targetX:targetX,targetY:targetY,targetPosition:targetPosition});var _getEdgeCenter=getEdgeCenter({sourceX:sourceX,sourceY:sourceY,targetX:targetX,targetY:targetY}),_getEdgeCenter2=_slicedToArray(_getEdgeCenter,2),edgeCenterX=_getEdgeCenter2[0],edgeCenterY=_getEdgeCenter2[1];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"path\",{id:id,style:style,className:\"react-flow__edge-path\",d:edgePath,markerEnd:markerEnd}),/*#__PURE__*/_jsx(\"foreignObject\",{width:foreignObjectSize,height:foreignObjectSize,x:edgeCenterX-foreignObjectSize/2,y:edgeCenterY-foreignObjectSize/2,className:\"edgebutton-foreignobject\",requiredExtensions:\"http://www.w3.org/1999/xhtml\",children:/*#__PURE__*/_jsx(\"body\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"edgebutton\",onClick:function onClick(event){return onEdgeClick(event,id,sourcePosition,targetPosition);},children:\"\\xD7\"})})})]});}// gets called after end of edge gets dragged to another source or target\nvar onEdgeUpdate=function onEdgeUpdate(oldEdge,newConnection){return setEdges(function(els){// Make API call here\nreturn updateEdge(oldEdge,newConnection,els);});};var onConnect=function onConnect(params){return setEdges(function(els){return addEdge(params,els);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"backbtn\",onClick:function onClick(){return props.setDeployment(null);},children:/*#__PURE__*/_jsx(\"b\",{children:\"\\u2190\\xA0\\xA0Back\"})}),/*#__PURE__*/_jsxs(ReactFlow,{nodes:nodes,edges:edges,onNodesChange:onNodesChange,onEdgesChange:onEdgesChange,snapToGrid:true,onEdgeUpdate:onEdgeUpdate,onConnect:onConnect,edgeTypes:{buttonedge:CustomEdge},fitView:true,attributionPosition:\"top-right\",style:{width:\"100vw\",height:\"100vh\"},children:[/*#__PURE__*/_jsx(MiniMap,{}),/*#__PURE__*/_jsx(Controls,{}),/*#__PURE__*/_jsx(Background,{variant:\"lines\",gap:50,size:0.5,style:{backgroundColor:\"#212121\"}})]})]});};export default UpdatableEdge;","map":{"version":3,"sources":["/home/git/SkiffUI/app/src/RenderGraph.js"],"names":["React","useState","ReactFlow","useNodesState","useEdgesState","Controls","updateEdge","addEdge","MiniMap","Background","getBezierPath","getEdgeCenter","UpdatableEdge","props","foreignObjectSize","initialNodes","nodes","setNodes","onNodesChange","initialEdges","edges","setEdges","onEdgesChange","postDelete","idxId","edge","fetch","method","headers","body","JSON","stringify","currIdx","then","response","json","setDeployment","onEdgeClick","evt","id","stopPropagation","Number","split","console","log","CustomEdge","sourceX","sourceY","targetX","targetY","sourcePosition","targetPosition","style","markerEnd","edgePath","edgeCenterX","edgeCenterY","event","onEdgeUpdate","oldEdge","newConnection","els","onConnect","params","buttonedge","width","height","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n\nimport ReactFlow, { useNodesState, useEdgesState, Controls, updateEdge, addEdge, MiniMap, Background, getBezierPath, getEdgeCenter } from 'react-flow-renderer';\nimport './button_edge.css';\nimport \"./graph.css\";\n\n\n\nconst UpdatableEdge = (props) => {\n\n    const foreignObjectSize = 40;\n\n\n    const [nodes, setNodes, onNodesChange] = useNodesState(props.initialNodes);\n    const [edges, setEdges, onEdgesChange] = useEdgesState(props.initialEdges);\n\n    const postDelete = async (idxId) => {\n        const edge = props.initialEdges[idxId]\n        await fetch('https://serverhackathon.prakshal.repl.co/deleteEdge', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify([props.currIdx, edge])\n        })\n            .then(response => response.json())\n            .then(response => { props.setDeployment(response); })\n    }\n\n    const onEdgeClick = async (evt, id) => {\n        evt.stopPropagation();\n        const idxId = Number(id.split(\"-\")[1])\n        console.log(props.initialEdges[idxId]);\n        await postDelete(idxId)\n    };\n\n    function CustomEdge({\n        id,\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourcePosition,\n        targetPosition,\n        style = {},\n        markerEnd,\n        \n    }) {\n        const edgePath = getBezierPath({\n            sourceX,\n            sourceY,\n            sourcePosition,\n            targetX,\n            targetY,\n            targetPosition,\n        });\n        const [edgeCenterX, edgeCenterY] = getEdgeCenter({\n            sourceX,\n            sourceY,\n            targetX,\n            targetY,\n        });\n\n        return (\n            <>\n                <path\n                    id={id}\n                    style={style}\n                    className=\"react-flow__edge-path\"\n                    d={edgePath}\n                    markerEnd={markerEnd}\n                />\n                <foreignObject\n                    width={foreignObjectSize}\n                    height={foreignObjectSize}\n                    x={edgeCenterX - foreignObjectSize / 2}\n                    y={edgeCenterY - foreignObjectSize / 2}\n                    className=\"edgebutton-foreignobject\"\n                    requiredExtensions=\"http://www.w3.org/1999/xhtml\"\n                >\n                    <body>\n                        <button className=\"edgebutton\" onClick={(event) => onEdgeClick(event, id, sourcePosition, targetPosition)}>\n                            Ã—\n                        </button>\n                    </body>\n                </foreignObject>\n            </>\n        );\n    }\n\n    // gets called after end of edge gets dragged to another source or target\n    const onEdgeUpdate = (oldEdge, newConnection) => setEdges((els) => {\n        // Make API call here\n        return updateEdge(oldEdge, newConnection, els);\n    });\n    const onConnect = (params) => setEdges((els) => addEdge(params, els));\n\n    return (\n        <>\n            <div className=\"backbtn\" onClick={() => props.setDeployment(null)}><b>&#8592;&nbsp;&nbsp;Back</b></div>\n            <ReactFlow\n                nodes={nodes}\n                edges={edges}\n                onNodesChange={onNodesChange}\n                onEdgesChange={onEdgesChange}\n                snapToGrid\n                onEdgeUpdate={onEdgeUpdate}\n                onConnect={onConnect}\n                edgeTypes={{ buttonedge: CustomEdge }}\n                fitView\n                attributionPosition=\"top-right\"\n                style={{ width: \"100vw\", height: \"100vh\" }}\n            >\n                <MiniMap />\n                <Controls />\n                <Background variant=\"lines\" gap={50} size={0.5} style={{ backgroundColor: \"#212121\" }} />\n            </ReactFlow>\n        </>\n    );\n};\n\nexport default UpdatableEdge;\n"]},"metadata":{},"sourceType":"module"}